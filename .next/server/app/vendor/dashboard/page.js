(()=>{var e={};e.id=382,e.ids=[382],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3644:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(7413),a=s(9052);function i({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,r.jsx)(a.DashboardSidebar,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto bg-slate-100",children:(0,r.jsx)("div",{className:"container mx-auto p-6",children:e})})]})}},3873:e=>{"use strict";e.exports=require("path")},4004:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/vendor/dashboard/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/vendor/dashboard/page.js","default")},4075:e=>{"use strict";e.exports=require("zlib")},4583:(e,t,s)=>{Promise.resolve().then(s.bind(s,4004))},4631:e=>{"use strict";e.exports=require("tls")},4734:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l});var r=s(5239),a=s(8088),i=s(8170),n=s.n(i),d=s(893),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let l={children:["",{children:["vendor",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4004)),"/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/vendor/dashboard/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3644)),"/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/vendor/layout.js"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5535)),"/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/asmorodwi/Desktop/Code/Program/dashboard-simlok/src/app/vendor/dashboard/page.js"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/vendor/dashboard/page",pathname:"/vendor/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6666:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(687);function a({title:e,children:t}){return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-slate-200",children:[(0,r.jsx)("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-slate-800",children:e})}),(0,r.jsx)("div",{className:"p-4",children:t})]})}},7727:(e,t,s)=>{Promise.resolve().then(s.bind(s,9956))},7910:e=>{"use strict";e.exports=require("stream")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")},9956:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(687),a=s(3210),i=s(6189),n=s(5762),d=s(9510),o=s(5606),l=s(6666);function c({children:e}){return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:e})}var u=s(2521),x=s(6652);function h(e){if(!e)return"Invalid Time";let t=e.split(":");return 3===t.length?`${t[0]}:${t[1]}`:"Invalid Time"}function m(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)([]),[d,o]=(0,a.useState)({total:0,pending:0,approved:0,rejected:0}),[u,h]=(0,a.useState)(null),[m,j]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!0),[f,w]=(0,a.useState)(null);async function y(e){if(confirm("Are you sure you want to delete this submission?"))try{let{error:t}=await n.N.from("submissions").delete().eq("id",e);if(t)throw t;s(t=>t.filter(t=>t.id!==e))}catch(e){alert("Gagal menghapus pengajuan. Coba lagi.")}}return v?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):f?(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Vendor Dashboard"}),(0,r.jsx)("button",{onClick:()=>e.push("/vendor/submit"),className:"px-4 py-2 bg-blue-800 text-white rounded-md hover:bg-blue-700 transition",children:"Tambah Pengajuan"})]}),(0,r.jsxs)(c,{children:[(0,r.jsx)(l.A,{title:"Total Pengajuan",children:(0,r.jsx)(p,{count:d.total,subtitle:"Pengajuan vendor",color:"text-blue-800"})}),(0,r.jsx)(l.A,{title:"Menunggu Verifikasi",children:(0,r.jsx)(p,{count:d.pending,subtitle:"Pengajuan dalam proses",color:"text-yellow-600"})}),(0,r.jsx)(l.A,{title:"Disetujui",children:(0,r.jsx)(p,{count:d.approved,subtitle:"Pengajuan disetujui",color:"text-green-600"})})]}),(0,r.jsx)(b,{submissions:t,onEdit:function(t){e.push(`/vendor/submit?id=${t}`)},onDelete:y,onView:function(e){h(e),j(!0)}}),m&&u&&(0,r.jsx)(x.A,{selectedSubmission:u,closeDetailModal:()=>{h(null),j(!1)}})]})}function p({count:e,subtitle:t,color:s}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:`text-3xl font-bold ${s}`,children:e}),(0,r.jsx)("p",{className:"text-slate-600",children:t})]})}function b({submissions:e,onEdit:t,onDelete:s,onView:a}){return 0===e.length?(0,r.jsx)("div",{className:"bg-white rounded-lg p-6 text-center text-gray-500 border border-slate-200 shadow-md",children:"Belum ada pengajuan. Klik Tambah Pengajuan untuk membuat pengajuan baru."}):(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-slate-800",children:"Pengajuan Terbaru"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-slate-200",children:[(0,r.jsx)("thead",{className:"bg-slate-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)(j,{children:"Vendor"}),(0,r.jsx)(j,{children:"Deskripsi Pekerjaan"}),(0,r.jsx)(j,{children:"Jadwal"}),(0,r.jsx)(j,{children:"Status"}),(0,r.jsx)(j,{children:"Aksi"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,r.jsxs)(v,{children:[(0,r.jsx)("div",{className:"font-medium text-slate-900",children:e.vendor_name}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:["SIMJA: ",e.simja_number]})]}),(0,r.jsxs)(v,{children:[(0,r.jsx)("div",{className:"text-slate-900 max-w-xs truncate",children:e.job_description}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:["Pekerja: ",e.worker_count," orang"]})]}),(0,r.jsxs)(v,{children:[(0,r.jsxs)("div",{children:[(0,d.GP)(new Date(e.start_date),"d MMMM yyyy",{locale:o.id})," s/d ",(0,d.GP)(new Date(e.end_date),"d MMMM yyyy",{locale:o.id})]}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:[h(e.start_time)," - ",h(e.end_time)]})]}),(0,r.jsx)(v,{children:(0,r.jsx)(u.A,{status:e.status})}),(0,r.jsx)(v,{children:(0,r.jsx)("div",{className:"flex space-x-2 text-sm font-medium",children:0==e.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>t(e.id),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>s(e.id),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded text-xs",children:"Delete"})]}):(0,r.jsx)("button",{onClick:()=>a(e),className:"px-6 py-2 border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white rounded text-xs transition",children:"Detail"})})})]},e.id))})]})})]})}function j({children:e}){return(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:e})}function v({children:e}){return(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,488,567,485,61,76],()=>s(4734));module.exports=r})();